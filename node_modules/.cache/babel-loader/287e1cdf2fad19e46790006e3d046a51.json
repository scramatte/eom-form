{"remainingRequest":"/home/scramatte/vue/eom-form/node_modules/babel-loader/lib/index.js!/home/scramatte/vue/eom-form/node_modules/eslint-loader/index.js??ref--13-0!/home/scramatte/vue/eom-form/src/components/abstract.js","dependencies":[{"path":"/home/scramatte/vue/eom-form/src/components/abstract.js","mtime":1588720983764},{"path":"/home/scramatte/vue/eom-form/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/scramatte/vue/eom-form/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/scramatte/vue/eom-form/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0IHsgZ2V0IGFzIG9iakdldCwgaXNGdW5jdGlvbiwgaXNTdHJpbmcsIGZvckVhY2ggfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgVmFsaWRhdG9ycyBmcm9tICcuL3ZhbGlkYXRvcnMnOwppbXBvcnQgeyBjb21waWxlIH0gZnJvbSAnZXhwcmVzc2lvbi1ldmFsJzsKCmZ1bmN0aW9uIGF0dHJpYnV0ZXNEaXJlY3RpdmUoZWwsIGJpbmRpbmcsIHZub2RlKSB7CiAgdmFyIGF0dHJzID0gb2JqR2V0KHZub2RlLmNvbnRleHQsICdzY2hlbWEuYXR0cmlidXRlcycsIHt9KTsKICB2YXIgY29udGFpbmVyID0gYmluZGluZy52YWx1ZSB8fCAnaW5wdXQnOwoKICBpZiAoaXNTdHJpbmcoY29udGFpbmVyKSkgewogICAgYXR0cnMgPSBvYmpHZXQoYXR0cnMsIGNvbnRhaW5lcikgfHwgYXR0cnM7CiAgfQoKICBmb3JFYWNoKGF0dHJzLCBmdW5jdGlvbiAodmFsLCBrZXkpIHsKICAgIGVsLnNldEF0dHJpYnV0ZShrZXksIHZhbCk7CiAgfSk7Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyXQogICAgfSwKICAgIGRpc2FibGVkOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4KICAgIH0sCiAgICByZWFkT25seTogewogICAgICB0eXBlOiBbU3RyaW5nLCBCb29sZWFuXQogICAgfSwKICAgIHZhbGlkYXRpb25zOiB7CiAgICAgIHR5cGU6IFtBcnJheSwgT2JqZWN0XQogICAgfQogIH0sCiAgZGlyZWN0aXZlczogewogICAgYXR0cmlidXRlczogewogICAgICBiaW5kOiBhdHRyaWJ1dGVzRGlyZWN0aXZlLAogICAgICB1cGRhdGVkOiBhdHRyaWJ1dGVzRGlyZWN0aXZlLAogICAgICBjb21wb25lbnRVcGRhdGVkOiBhdHRyaWJ1dGVzRGlyZWN0aXZlCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgc3RhdGU6IGZ1bmN0aW9uIHN0YXRlKCkgewogICAgICByZXR1cm4gdGhpcy5lcnJvcnMubGVuZ3RoID09PSAwOwogICAgfSwKICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcigpIHsKICAgICAgcmV0dXJuIHRoaXMuZXJyb3JzLmpvaW4oJywgJyk7CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZXJyb3JzOiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGV2YWxFeHByOiBmdW5jdGlvbiBldmFsRXhwcihleHByKSB7CiAgICAgIGlmIChpc1N0cmluZyhleHByKSkgewogICAgICAgIHZhciBmbiA9IGNvbXBpbGUoZXhwcik7CiAgICAgICAgcmV0dXJuIGZuKHRoaXMpOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHsKICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB2YWx1ZSk7CiAgICB9LAogICAgY2xlYXJWYWxpZGF0aW9uc0Vycm9yczogZnVuY3Rpb24gY2xlYXJWYWxpZGF0aW9uc0Vycm9ycygpIHsKICAgICAgdGhpcy5lcnJvcnMgPSBbXTsKICAgIH0sCiAgICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMudmFsaWRhdGlvbnMpIHJldHVybiB0cnVlOwogICAgICB0aGlzLmNsZWFyVmFsaWRhdGlvbnNFcnJvcnMoKTsKICAgICAgY29uc29sZS53YXJuKCd2YWxpZGF0b3JzOicsIE9iamVjdC5rZXlzKHRoaXMudmFsaWRhdGlvbnMpKTsKICAgICAgZm9yRWFjaCh0aGlzLnZhbGlkYXRpb25zLCBmdW5jdGlvbiAob3B0aW9ucywgbmFtZSkgewogICAgICAgIHZhciB2YWxpZGF0b3IgPSBWYWxpZGF0b3JzW25hbWVdOyAvLyBjb25zb2xlLndhcm4oJ3ZhbGlkYXRvcjonLCBuYW1lKQoKICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWxpZGF0b3IpKSB7CiAgICAgICAgICB2YXIgZXJyb3IgPSB2YWxpZGF0b3IuY2FsbChfdGhpcywgX3RoaXMudmFsdWUsIG9wdGlvbnMpOwoKICAgICAgICAgIGlmIChlcnJvcikgewogICAgICAgICAgICBfdGhpcy5lcnJvcnMucHVzaChlcnJvcik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUud2FybigndW5rbm93biB2YWxpZGF0b3I6JywgbmFtZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHRoaXMuZXJyb3JzLmxlbmd0aCA9PT0gMDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/scramatte/vue/eom-form/src/components/abstract.js"],"names":["get","objGet","isFunction","isString","forEach","Validators","compile","attributesDirective","el","binding","vnode","attrs","context","container","value","val","key","setAttribute","props","type","String","Number","disabled","Boolean","readOnly","validations","Array","Object","directives","attributes","bind","updated","componentUpdated","computed","state","errors","length","error","join","data","methods","evalExpr","expr","fn","update","$emit","clearValidationsErrors","validate","console","warn","keys","options","name","validator","call","push"],"mappings":"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","sourcesContent":["import { get as objGet, isFunction, isString, forEach } from 'lodash'\nimport Validators from './validators'\nimport { compile } from 'expression-eval'\n\nfunction attributesDirective (el, binding, vnode) {\n  let attrs = objGet(vnode.context, 'schema.attributes', {})\n  let container = binding.value || 'input'\n  if (isString(container)) {\n    attrs = objGet(attrs, container) || attrs\n  }\n  forEach(attrs, (val, key) => {\n    el.setAttribute(key, val)\n  })\n}\n\nexport default {\n  props: {\n    value: {\n      type: [String, Number]\n    },\n    disabled: {\n      type: Boolean\n    },\n    readOnly: {\n      type: [String, Boolean]\n    },\n    validations: {\n      type: [Array, Object]\n    }\n  },\n  directives: {\n    attributes: {\n      bind: attributesDirective,\n      updated: attributesDirective,\n      componentUpdated: attributesDirective\n    }\n  },\n  computed: {\n    state () {\n      return (this.errors.length === 0)\n    },\n    error () {\n      return this.errors.join(', ')\n    }\n  },\n  data () {\n    return {\n      errors: []\n    }\n  },\n  methods: {\n    evalExpr (expr) {\n      if (isString(expr)) {\n        const fn = compile(expr)\n        return fn(this)\n      }\n    },\n    update (value) {\n      this.$emit('input', value)\n    },\n    clearValidationsErrors () {\n      this.errors = []\n    },\n    validate () {\n      if (!this.validations) return true\n\n      this.clearValidationsErrors()\n      console.warn('validators:', Object.keys(this.validations))\n\n      forEach(this.validations, (options, name) => {\n        let validator = Validators[name]\n        // console.warn('validator:', name)\n\n        if (isFunction(validator)) {\n          let error = validator.call(this, this.value, options)\n          if (error) {\n            this.errors.push(error)\n          }\n        } else {\n          console.warn('unknown validator:', name)\n        }\n      })\n\n      return (this.errors.length === 0)\n    }\n  }\n}\n"]}]}