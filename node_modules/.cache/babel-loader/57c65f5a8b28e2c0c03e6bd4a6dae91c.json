{"remainingRequest":"/home/scramatte/vue/eom-form/node_modules/thread-loader/dist/cjs.js!/home/scramatte/vue/eom-form/node_modules/babel-loader/lib/index.js!/home/scramatte/vue/eom-form/node_modules/eslint-loader/index.js??ref--13-0!/home/scramatte/vue/eom-form/src/components/elements/EomAbstract.js","dependencies":[{"path":"/home/scramatte/vue/eom-form/src/components/elements/EomAbstract.js","mtime":1588755831911},{"path":"/home/scramatte/vue/eom-form/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/scramatte/vue/eom-form/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/scramatte/vue/eom-form/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/scramatte/vue/eom-form/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0IHsgZ2V0IGFzIG9iakdldCwgaXNGdW5jdGlvbiwgaXNTdHJpbmcsIGZvckVhY2ggfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgVmFsaWRhdG9ycyBmcm9tICcuLi8uLi91dGlscy92YWxpZGF0b3JzJzsKaW1wb3J0IHsgY29tcGlsZSB9IGZyb20gJ2V4cHJlc3Npb24tZXZhbCc7CgpmdW5jdGlvbiBhdHRyaWJ1dGVzRGlyZWN0aXZlKGVsLCBiaW5kaW5nLCB2bm9kZSkgewogIHZhciBhdHRycyA9IG9iakdldCh2bm9kZS5jb250ZXh0LCAnc2NoZW1hLmF0dHJpYnV0ZXMnLCB7fSk7CiAgdmFyIGNvbnRhaW5lciA9IGJpbmRpbmcudmFsdWUgfHwgJ2lucHV0JzsKCiAgaWYgKGlzU3RyaW5nKGNvbnRhaW5lcikpIHsKICAgIGF0dHJzID0gb2JqR2V0KGF0dHJzLCBjb250YWluZXIpIHx8IGF0dHJzOwogIH0KCiAgZm9yRWFjaChhdHRycywgZnVuY3Rpb24gKHZhbCwga2V5KSB7CiAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWwpOwogIH0pOwp9CgpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0KICAgIH0sCiAgICBkaXNhYmxlZDogewogICAgICB0eXBlOiBCb29sZWFuCiAgICB9LAogICAgcmVhZE9ubHk6IHsKICAgICAgdHlwZTogW1N0cmluZywgQm9vbGVhbl0KICAgIH0sCiAgICB2YWxpZGF0aW9uczogewogICAgICB0eXBlOiBbQXJyYXksIE9iamVjdF0KICAgIH0KICB9LAogIGRpcmVjdGl2ZXM6IHsKICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgYmluZDogYXR0cmlidXRlc0RpcmVjdGl2ZSwKICAgICAgdXBkYXRlZDogYXR0cmlidXRlc0RpcmVjdGl2ZSwKICAgICAgY29tcG9uZW50VXBkYXRlZDogYXR0cmlidXRlc0RpcmVjdGl2ZQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHN0YXRlOiBmdW5jdGlvbiBzdGF0ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuZXJyb3JzLmxlbmd0aCA9PT0gMDsKICAgIH0sCiAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoKSB7CiAgICAgIHJldHVybiB0aGlzLmVycm9ycy5qb2luKCcsICcpOwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVycm9yczogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBldmFsRXhwcjogZnVuY3Rpb24gZXZhbEV4cHIoZXhwcikgewogICAgICBpZiAoaXNTdHJpbmcoZXhwcikpIHsKICAgICAgICB2YXIgZm4gPSBjb21waWxlKGV4cHIpOwogICAgICAgIHJldHVybiBmbih0aGlzKTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdmFsdWUpOwogICAgfSwKICAgIGNsZWFyVmFsaWRhdGlvbnNFcnJvcnM6IGZ1bmN0aW9uIGNsZWFyVmFsaWRhdGlvbnNFcnJvcnMoKSB7CiAgICAgIHRoaXMuZXJyb3JzID0gW107CiAgICB9LAogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLnZhbGlkYXRpb25zKSByZXR1cm4gdHJ1ZTsKICAgICAgdGhpcy5jbGVhclZhbGlkYXRpb25zRXJyb3JzKCk7CiAgICAgIGNvbnNvbGUud2FybigndmFsaWRhdG9yczonLCBPYmplY3Qua2V5cyh0aGlzLnZhbGlkYXRpb25zKSk7CiAgICAgIGZvckVhY2godGhpcy52YWxpZGF0aW9ucywgZnVuY3Rpb24gKG9wdGlvbnMsIG5hbWUpIHsKICAgICAgICB2YXIgdmFsaWRhdG9yID0gVmFsaWRhdG9yc1tuYW1lXTsgLy8gY29uc29sZS53YXJuKCd2YWxpZGF0b3I6JywgbmFtZSkKCiAgICAgICAgaWYgKGlzRnVuY3Rpb24odmFsaWRhdG9yKSkgewogICAgICAgICAgdmFyIGVycm9yID0gdmFsaWRhdG9yLmNhbGwoX3RoaXMsIF90aGlzLnZhbHVlLCBvcHRpb25zKTsKCiAgICAgICAgICBpZiAoZXJyb3IpIHsKICAgICAgICAgICAgX3RoaXMuZXJyb3JzLnB1c2goZXJyb3IpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLndhcm4oJ3Vua25vd24gdmFsaWRhdG9yOicsIG5hbWUpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiB0aGlzLmVycm9ycy5sZW5ndGggPT09IDA7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/scramatte/vue/eom-form/src/components/elements/EomAbstract.js"],"names":["get","objGet","isFunction","isString","forEach","Validators","compile","attributesDirective","el","binding","vnode","attrs","context","container","value","val","key","setAttribute","props","type","String","Number","disabled","Boolean","readOnly","validations","Array","Object","directives","attributes","bind","updated","componentUpdated","computed","state","errors","length","error","join","data","methods","evalExpr","expr","fn","update","$emit","clearValidationsErrors","validate","console","warn","keys","options","name","validator","call","push"],"mappings":"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","sourcesContent":["import { get as objGet, isFunction, isString, forEach } from 'lodash'\nimport Validators from '../../utils/validators'\nimport { compile } from 'expression-eval'\n\nfunction attributesDirective (el, binding, vnode) {\n  let attrs = objGet(vnode.context, 'schema.attributes', {})\n  let container = binding.value || 'input'\n  if (isString(container)) {\n    attrs = objGet(attrs, container) || attrs\n  }\n  forEach(attrs, (val, key) => {\n    el.setAttribute(key, val)\n  })\n}\n\nexport default {\n  props: {\n    value: {\n      type: [String, Number]\n    },\n    disabled: {\n      type: Boolean\n    },\n    readOnly: {\n      type: [String, Boolean]\n    },\n    validations: {\n      type: [Array, Object]\n    }\n  },\n  directives: {\n    attributes: {\n      bind: attributesDirective,\n      updated: attributesDirective,\n      componentUpdated: attributesDirective\n    }\n  },\n  computed: {\n    state () {\n      return (this.errors.length === 0)\n    },\n    error () {\n      return this.errors.join(', ')\n    }\n  },\n  data () {\n    return {\n      errors: []\n    }\n  },\n  methods: {\n    evalExpr (expr) {\n      if (isString(expr)) {\n        const fn = compile(expr)\n        return fn(this)\n      }\n    },\n    update (value) {\n      this.$emit('input', value)\n    },\n    clearValidationsErrors () {\n      this.errors = []\n    },\n    validate () {\n      if (!this.validations) return true\n\n      this.clearValidationsErrors()\n      console.warn('validators:', Object.keys(this.validations))\n\n      forEach(this.validations, (options, name) => {\n        let validator = Validators[name]\n        // console.warn('validator:', name)\n\n        if (isFunction(validator)) {\n          let error = validator.call(this, this.value, options)\n          if (error) {\n            this.errors.push(error)\n          }\n        } else {\n          console.warn('unknown validator:', name)\n        }\n      })\n\n      return (this.errors.length === 0)\n    }\n  }\n}\n"]}]}