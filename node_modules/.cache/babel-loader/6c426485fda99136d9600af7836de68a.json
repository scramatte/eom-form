{"remainingRequest":"/home/scramatte/vue/eom-form/node_modules/thread-loader/dist/cjs.js!/home/scramatte/vue/eom-form/node_modules/babel-loader/lib/index.js!/home/scramatte/vue/eom-form/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/scramatte/vue/eom-form/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/scramatte/vue/eom-form/src/components/EomForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/scramatte/vue/eom-form/src/components/EomForm.vue","mtime":1588722898826},{"path":"/home/scramatte/vue/eom-form/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/scramatte/vue/eom-form/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/scramatte/vue/eom-form/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/scramatte/vue/eom-form/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/scramatte/vue/eom-form/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvc2NyYW1hdHRlL3Z1ZS9lb20tZm9ybS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvaG9tZS9zY3JhbWF0dGUvdnVlL2VvbS1mb3JtL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgaXNGdW5jdGlvbiwgZm9yRWFjaCB9IGZyb20gJ2xvZGFzaCc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgc2NoZW1hOiB7CiAgICAgIHR5cGU6IFtPYmplY3QsIEFycmF5XSwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICB2YWx1ZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgc2hhcmVkQ29uZmlnOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybToge30KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLnZhbGlkYXRlKCk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHBhcnNlZFNjaGVtYTogZnVuY3Rpb24gcGFyc2VkU2NoZW1hKCkgewogICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnNjaGVtYSkpIHJldHVybiB0aGlzLnNjaGVtYTsKICAgICAgdmFyIGFycmF5U2NoZW1hID0gW107CgogICAgICBmb3IgKHZhciBtb2RlbCBpbiB0aGlzLnNjaGVtYSkgewogICAgICAgIGFycmF5U2NoZW1hLnB1c2goX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLnNjaGVtYVttb2RlbF0pLCB7fSwgewogICAgICAgICAgbW9kZWw6IG1vZGVsCiAgICAgICAgfSkpOwogICAgICB9CgogICAgICByZXR1cm4gYXJyYXlTY2hlbWE7CiAgICB9LAogICAgZXJyb3JNZXNzYWdlczogZnVuY3Rpb24gZXJyb3JNZXNzYWdlcygpIHsKICAgICAgcmV0dXJuIFsnJ107CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBwcmV0dHlKU09OOiBmdW5jdGlvbiBwcmV0dHlKU09OKGpzb24pIHsKICAgICAgaWYgKGpzb24pIHsKICAgICAgICBqc29uID0gSlNPTi5zdHJpbmdpZnkoanNvbiwgdW5kZWZpbmVkLCA0KTsKICAgICAgICBqc29uID0ganNvbi5yZXBsYWNlKC8mL2csICcmJykucmVwbGFjZSgvPC9nLCAnPCcpLnJlcGxhY2UoLz4vZywgJz4nKTsKICAgICAgICByZXR1cm4ganNvbi5yZXBsYWNlKC8oIihcXHVbYS16QS1aMC05XXs0fXxcXFtedV18W15cXCJdKSoiKFxzKjopP3xcYih0cnVlfGZhbHNlfG51bGwpXGJ8LT9cZCsoPzpcLlxkKik/KD86W2VFXVsrLV0/XGQrKT8pL2csIGZ1bmN0aW9uIChtYXRjaCkgewogICAgICAgICAgdmFyIGNscyA9ICdudW1iZXInOwoKICAgICAgICAgIGlmICgvXiIvLnRlc3QobWF0Y2gpKSB7CiAgICAgICAgICAgIGlmICgvOiQvLnRlc3QobWF0Y2gpKSB7CiAgICAgICAgICAgICAgY2xzID0gJ2tleSc7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY2xzID0gJ3N0cmluZyc7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoL3RydWV8ZmFsc2UvLnRlc3QobWF0Y2gpKSB7CiAgICAgICAgICAgIGNscyA9ICdib29sZWFuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoL251bGwvLnRlc3QobWF0Y2gpKSB7CiAgICAgICAgICAgIGNscyA9ICdudWxsJzsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gJzxzcGFuIGNsYXNzPSInICsgY2xzICsgJyI+JyArIG1hdGNoICsgJzwvc3Bhbj4nOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUocHJvcGVydHksIHZhbHVlKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLnZhbHVlKSwge30sIF9kZWZpbmVQcm9wZXJ0eSh7fSwgcHJvcGVydHksIHZhbHVlKSkpOwogICAgfSwKICAgIGJpbmRzOiBmdW5jdGlvbiBiaW5kcyhmaWVsZCkgewogICAgICByZXR1cm4gZmllbGQuc2NoZW1hID8gewogICAgICAgIHNjaGVtYTogZmllbGQuc2NoZW1hCiAgICAgIH0gOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuc2hhcmVkQ29uZmlnKSwgZmllbGQpOwogICAgfSwKICAgIHZhbDogZnVuY3Rpb24gdmFsKGZpZWxkKSB7CiAgICAgIGlmIChmaWVsZC5zY2hlbWEgJiYgIXRoaXMudmFsdWVbZmllbGQubW9kZWxdKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy52YWx1ZVtmaWVsZC5tb2RlbF07CiAgICB9LAogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKCkgewogICAgICB2YXIgdmFsaWQgPSB0cnVlOwogICAgICBmb3JFYWNoKHRoaXMuJGNoaWxkcmVuLCBmdW5jdGlvbiAoY2hpbGQpIHsKICAgICAgICBpZiAoaXNGdW5jdGlvbihjaGlsZC52YWxpZGF0ZSkpIHsKICAgICAgICAgIHZhciB2YWxpZGF0aW9uID0gY2hpbGQudmFsaWRhdGUoKTsKICAgICAgICAgIHZhbGlkID0gdmFsaWQgJiYgdmFsaWRhdGlvbjsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gdmFsaWQ7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["EomForm.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <b-row>\n        <component\n            v-for=\"field in parsedSchema\"\n            :key=\"field.model\"\n            :name=\"field.model\"\n            :validations=\"field.validations\"\n            :is=\"field.component\"\n            v-bind=\"binds(field)\"\n            :value=\"val(field)\"\n            @input=\"update(field.model, $event)\"\n        >\n        <slot/>\n        </component>\n    </b-row>\n    <pre v-html=\"prettyJSON(value)\"></pre>\n  </div>\n</template>\n\n<style>\n.key {\n  font-weight: bold;\n  color: #02BC77;\n}\n\n</style>\n<script>\nimport { isFunction, forEach } from 'lodash'\n\nexport default {\n  props: {\n    schema: {\n      type: [Object, Array],\n      required: true\n    },\n    value: {\n      type: Object,\n      required: true\n    },\n    sharedConfig: {\n      type: Object,\n      required: false\n    }\n  },\n  data () {\n    return {\n      form: {\n      }\n    }\n  },\n  watch: {\n    value: function () {\n      this.$nextTick(() => {\n        this.validate()\n      })\n    }\n  },\n  computed: {\n    parsedSchema () {\n      if (Array.isArray(this.schema)) return this.schema\n      const arraySchema = []\n      for (let model in this.schema) {\n        arraySchema.push({\n          ...this.schema[model],\n          model\n        })\n      }\n      return arraySchema\n    },\n    errorMessages () {\n      return ['']\n    }\n  },\n  methods: {\n    prettyJSON: function (json) {\n      if (json) {\n        json = JSON.stringify(json, undefined, 4)\n        json = json.replace(/&/g, '&').replace(/</g, '<').replace(/>/g, '>')\n        return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/g, function (match) {\n          var cls = 'number'\n          if (/^\"/.test(match)) {\n            if (/:$/.test(match)) {\n              cls = 'key'\n            } else {\n              cls = 'string'\n            }\n          } else if (/true|false/.test(match)) {\n            cls = 'boolean'\n          } else if (/null/.test(match)) {\n            cls = 'null'\n          }\n          return '<span class=\"' + cls + '\">' + match + '</span>'\n        })\n      }\n    },\n    update (property, value) {\n      this.$emit('input', {\n        ...this.value,\n        [property]: value\n      })\n    },\n    binds (field) {\n      return field.schema\n        ? { schema: field.schema }\n        : { ...this.sharedConfig, ...field }\n    },\n    val (field) {\n      if (field.schema && !this.value[field.model]) {\n        return {}\n      }\n      return this.value[field.model]\n    },\n    validate () {\n      let valid = true\n      forEach(this.$children, (child) => {\n        if (isFunction(child.validate)) {\n          let validation = child.validate()\n          valid = valid && validation\n        }\n      })\n      return valid\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/components/fields"}]}