{"remainingRequest":"/home/scramatte/vue/eom-form/node_modules/thread-loader/dist/cjs.js!/home/scramatte/vue/eom-form/node_modules/babel-loader/lib/index.js!/home/scramatte/vue/eom-form/node_modules/eslint-loader/index.js??ref--13-0!/home/scramatte/vue/eom-form/src/components/fields/EomAbstract.js","dependencies":[{"path":"/home/scramatte/vue/eom-form/src/components/fields/EomAbstract.js","mtime":1588783927013},{"path":"/home/scramatte/vue/eom-form/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/scramatte/vue/eom-form/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/scramatte/vue/eom-form/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/scramatte/vue/eom-form/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3RvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0IHsgZ2V0IGFzIG9iakdldCwgaXNGdW5jdGlvbiwgaXNTdHJpbmcsIGZvckVhY2ggfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgVmFsaWRhdG9ycyBmcm9tICcuLi8uLi91dGlscy92YWxpZGF0b3JzJzsKaW1wb3J0IHsgY29tcGlsZSB9IGZyb20gJ2V4cHJlc3Npb24tZXZhbCc7CgpmdW5jdGlvbiBhdHRyaWJ1dGVzRGlyZWN0aXZlKGVsLCBiaW5kaW5nLCB2bm9kZSkgewogIHZhciBhdHRycyA9IG9iakdldCh2bm9kZS5jb250ZXh0LCAnc2NoZW1hLmF0dHJpYnV0ZXMnLCB7fSk7CiAgdmFyIGNvbnRhaW5lciA9IGJpbmRpbmcudmFsdWUgfHwgJ2lucHV0JzsKCiAgaWYgKGlzU3RyaW5nKGNvbnRhaW5lcikpIHsKICAgIGF0dHJzID0gb2JqR2V0KGF0dHJzLCBjb250YWluZXIpIHx8IGF0dHJzOwogIH0KCiAgZm9yRWFjaChhdHRycywgZnVuY3Rpb24gKHZhbCwga2V5KSB7CiAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWwpOwogIH0pOwp9CgpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0KICAgIH0sCiAgICBkaXNhYmxlZDogewogICAgICB0eXBlOiBCb29sZWFuCiAgICB9LAogICAgcmVhZE9ubHk6IHsKICAgICAgdHlwZTogW1N0cmluZywgQm9vbGVhbl0KICAgIH0sCiAgICB2YWxpZGF0aW9uczogewogICAgICB0eXBlOiBbQXJyYXksIE9iamVjdF0KICAgIH0sCiAgICBuYW1lOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBsYWJlbDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgaGVscDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgfSwKICAgIHNpemU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogZmFsc2UKICAgIH0sCiAgICBpY29uOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICB9CiAgfSwKICBkaXJlY3RpdmVzOiB7CiAgICBhdHRyaWJ1dGVzOiB7CiAgICAgIGJpbmQ6IGF0dHJpYnV0ZXNEaXJlY3RpdmUsCiAgICAgIHVwZGF0ZWQ6IGF0dHJpYnV0ZXNEaXJlY3RpdmUsCiAgICAgIGNvbXBvbmVudFVwZGF0ZWQ6IGF0dHJpYnV0ZXNEaXJlY3RpdmUKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBzdGF0ZTogZnVuY3Rpb24gc3RhdGUoKSB7CiAgICAgIHJldHVybiB0aGlzLmVycm9ycy5sZW5ndGggPT09IDA7CiAgICB9LAogICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKCkgewogICAgICByZXR1cm4gdGhpcy5lcnJvcnMuam9pbignLCAnKTsKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlcnJvcnM6IFtdLAogICAgICB0b2dnbGVIZWxwOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGV2YWxFeHByOiBmdW5jdGlvbiBldmFsRXhwcihleHByKSB7CiAgICAgIGlmIChpc1N0cmluZyhleHByKSkgewogICAgICAgIHZhciBmbiA9IGNvbXBpbGUoZXhwcik7CiAgICAgICAgcmV0dXJuIGZuKHRoaXMpOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHsKICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB2YWx1ZSk7CiAgICB9LAogICAgY2xlYXJWYWxpZGF0aW9uc0Vycm9yczogZnVuY3Rpb24gY2xlYXJWYWxpZGF0aW9uc0Vycm9ycygpIHsKICAgICAgdGhpcy5lcnJvcnMgPSBbXTsKICAgIH0sCiAgICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMudmFsaWRhdGlvbnMpIHJldHVybiB0cnVlOwogICAgICB0aGlzLmNsZWFyVmFsaWRhdGlvbnNFcnJvcnMoKTsKICAgICAgY29uc29sZS53YXJuKCd2YWxpZGF0b3JzOicsIE9iamVjdC5rZXlzKHRoaXMudmFsaWRhdGlvbnMpKTsKICAgICAgZm9yRWFjaCh0aGlzLnZhbGlkYXRpb25zLCBmdW5jdGlvbiAob3B0aW9ucywgbmFtZSkgewogICAgICAgIHZhciB2YWxpZGF0b3IgPSBWYWxpZGF0b3JzW25hbWVdOyAvLyBjb25zb2xlLndhcm4oJ3ZhbGlkYXRvcjonLCBuYW1lKQoKICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWxpZGF0b3IpKSB7CiAgICAgICAgICB2YXIgZXJyb3IgPSB2YWxpZGF0b3IuY2FsbChfdGhpcywgX3RoaXMudmFsdWUsIG9wdGlvbnMpOwoKICAgICAgICAgIGlmIChlcnJvcikgewogICAgICAgICAgICBfdGhpcy5lcnJvcnMucHVzaChlcnJvcik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUud2FybigndW5rbm93biB2YWxpZGF0b3I6JywgbmFtZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHRoaXMuZXJyb3JzLmxlbmd0aCA9PT0gMDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/scramatte/vue/eom-form/src/components/fields/EomAbstract.js"],"names":["get","objGet","isFunction","isString","forEach","Validators","compile","attributesDirective","el","binding","vnode","attrs","context","container","value","val","key","setAttribute","props","type","String","Number","disabled","Boolean","readOnly","validations","Array","Object","name","required","label","help","size","icon","directives","attributes","bind","updated","componentUpdated","computed","state","errors","length","error","join","data","toggleHelp","methods","evalExpr","expr","fn","update","$emit","clearValidationsErrors","validate","console","warn","keys","options","validator","call","push"],"mappings":"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","sourcesContent":["import { get as objGet, isFunction, isString, forEach } from 'lodash'\nimport Validators from '../../utils/validators'\nimport { compile } from 'expression-eval'\n\nfunction attributesDirective (el, binding, vnode) {\n  let attrs = objGet(vnode.context, 'schema.attributes', {})\n  let container = binding.value || 'input'\n  if (isString(container)) {\n    attrs = objGet(attrs, container) || attrs\n  }\n  forEach(attrs, (val, key) => {\n    el.setAttribute(key, val)\n  })\n}\n\nexport default {\n  props: {\n    value: {\n      type: [String, Number]\n    },\n    disabled: {\n      type: Boolean\n    },\n    readOnly: {\n      type: [String, Boolean]\n    },\n    validations: {\n      type: [Array, Object]\n    },\n    name: {\n      type: String,\n      required: true\n    },\n    label: {\n      type: String,\n      required: true\n    },\n    help: {\n      type: String,\n      required: false\n    },\n    size: {\n      type: String,\n      required: false\n    },\n    icon: {\n      type: String,\n      required: false\n    }\n  },\n  directives: {\n    attributes: {\n      bind: attributesDirective,\n      updated: attributesDirective,\n      componentUpdated: attributesDirective\n    }\n  },\n  computed: {\n    state () {\n      return (this.errors.length === 0)\n    },\n    error () {\n      return this.errors.join(', ')\n    }\n  },\n  data () {\n    return {\n      errors: [],\n      toggleHelp: false\n    }\n  },\n  methods: {\n    evalExpr (expr) {\n      if (isString(expr)) {\n        const fn = compile(expr)\n        return fn(this)\n      }\n    },\n    update (value) {\n      this.$emit('input', value)\n    },\n    clearValidationsErrors () {\n      this.errors = []\n    },\n    validate () {\n      if (!this.validations) return true\n\n      this.clearValidationsErrors()\n      console.warn('validators:', Object.keys(this.validations))\n\n      forEach(this.validations, (options, name) => {\n        let validator = Validators[name]\n        // console.warn('validator:', name)\n\n        if (isFunction(validator)) {\n          let error = validator.call(this, this.value, options)\n          if (error) {\n            this.errors.push(error)\n          }\n        } else {\n          console.warn('unknown validator:', name)\n        }\n      })\n\n      return (this.errors.length === 0)\n    }\n  }\n}\n"]}]}