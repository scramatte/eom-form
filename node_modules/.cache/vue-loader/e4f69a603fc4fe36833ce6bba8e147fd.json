{"remainingRequest":"/home/scramatte/vue/eom-form/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/scramatte/vue/eom-form/src/components/core/EomForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/scramatte/vue/eom-form/src/components/core/EomForm.vue","mtime":1588783616264},{"path":"/home/scramatte/vue/eom-form/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/scramatte/vue/eom-form/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/scramatte/vue/eom-form/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/scramatte/vue/eom-form/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGlzRnVuY3Rpb24sIGZvckVhY2ggfSBmcm9tICdsb2Rhc2gnCgpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIHNjaGVtYTogewogICAgICB0eXBlOiBbT2JqZWN0LCBBcnJheV0sCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHNoYXJlZENvbmZpZzogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgfQogIH0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7CiAgICAgIH0KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy52YWxpZGF0ZSgpCiAgICAgIH0pCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgcGFyc2VkU2NoZW1hICgpIHsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5zY2hlbWEpKSByZXR1cm4gdGhpcy5zY2hlbWEKICAgICAgY29uc3QgYXJyYXlTY2hlbWEgPSBbXQogICAgICBmb3IgKGxldCBtb2RlbCBpbiB0aGlzLnNjaGVtYSkgewogICAgICAgIGFycmF5U2NoZW1hLnB1c2goewogICAgICAgICAgLi4udGhpcy5zY2hlbWFbbW9kZWxdLAogICAgICAgICAgbW9kZWwKICAgICAgICB9KQogICAgICB9CiAgICAgIHJldHVybiBhcnJheVNjaGVtYQogICAgfSwKICAgIGVycm9yTWVzc2FnZXMgKCkgewogICAgICByZXR1cm4gWycnXQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgcHJldHR5SlNPTjogZnVuY3Rpb24gKGpzb24pIHsKICAgICAgaWYgKGpzb24pIHsKICAgICAgICBqc29uID0gSlNPTi5zdHJpbmdpZnkoanNvbiwgdW5kZWZpbmVkLCA0KQogICAgICAgIGpzb24gPSBqc29uLnJlcGxhY2UoLyYvZywgJyYnKS5yZXBsYWNlKC88L2csICc8JykucmVwbGFjZSgvPi9nLCAnPicpCiAgICAgICAgcmV0dXJuIGpzb24ucmVwbGFjZSgvKCIoXFx1W2EtekEtWjAtOV17NH18XFxbXnVdfFteXFwiXSkqIihccyo6KT98XGIodHJ1ZXxmYWxzZXxudWxsKVxifC0/XGQrKD86XC5cZCopPyg/OltlRV1bKy1dP1xkKyk/KS9nLCBmdW5jdGlvbiAobWF0Y2gpIHsKICAgICAgICAgIHZhciBjbHMgPSAnbnVtYmVyJwogICAgICAgICAgaWYgKC9eIi8udGVzdChtYXRjaCkpIHsKICAgICAgICAgICAgaWYgKC86JC8udGVzdChtYXRjaCkpIHsKICAgICAgICAgICAgICBjbHMgPSAna2V5JwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNscyA9ICdzdHJpbmcnCiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoL3RydWV8ZmFsc2UvLnRlc3QobWF0Y2gpKSB7CiAgICAgICAgICAgIGNscyA9ICdib29sZWFuJwogICAgICAgICAgfSBlbHNlIGlmICgvbnVsbC8udGVzdChtYXRjaCkpIHsKICAgICAgICAgICAgY2xzID0gJ251bGwnCiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gJzxzcGFuIGNsYXNzPSInICsgY2xzICsgJyI+JyArIG1hdGNoICsgJzwvc3Bhbj4nCiAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZSAocHJvcGVydHksIHZhbHVlKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgewogICAgICAgIC4uLnRoaXMudmFsdWUsCiAgICAgICAgW3Byb3BlcnR5XTogdmFsdWUKICAgICAgfSkKICAgIH0sCiAgICBiaW5kcyAoZmllbGQpIHsKICAgICAgcmV0dXJuIGZpZWxkLnNjaGVtYQogICAgICAgID8geyBzY2hlbWE6IGZpZWxkLnNjaGVtYSB9CiAgICAgICAgOiB7IC4uLnRoaXMuc2hhcmVkQ29uZmlnLCAuLi5maWVsZCB9CiAgICB9LAogICAgdmFsIChmaWVsZCkgewogICAgICBpZiAoZmllbGQuc2NoZW1hICYmICF0aGlzLnZhbHVlW2ZpZWxkLm1vZGVsXSkgewogICAgICAgIHJldHVybiB7fQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLnZhbHVlW2ZpZWxkLm1vZGVsXQogICAgfSwKICAgIHZhbGlkYXRlICgpIHsKICAgICAgbGV0IHZhbGlkID0gdHJ1ZQogICAgICBmb3JFYWNoKHRoaXMuJGNoaWxkcmVuLCAoY2hpbGQpID0+IHsKICAgICAgICBpZiAoaXNGdW5jdGlvbihjaGlsZC52YWxpZGF0ZSkpIHsKICAgICAgICAgIGxldCB2YWxpZGF0aW9uID0gY2hpbGQudmFsaWRhdGUoKQogICAgICAgICAgdmFsaWQgPSB2YWxpZCAmJiB2YWxpZGF0aW9uCiAgICAgICAgfQogICAgICB9KQogICAgICByZXR1cm4gdmFsaWQKICAgIH0KICB9Cn0K"},{"version":3,"sources":["EomForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EomForm.vue","sourceRoot":"src/components/core","sourcesContent":["<template>\n  <div>\n    <b-row>\n        <component\n            v-for=\"field in parsedSchema\"\n            :key=\"field.model\"\n            :name=\"field.model\"\n            :validations=\"field.validations\"\n            :is=\"field.component\"\n            v-bind=\"binds(field)\"\n            :value=\"val(field)\"\n            @input=\"update(field.model, $event)\"\n        >\n        <slot/>\n        </component>\n    </b-row>\n    <pre v-html=\"prettyJSON(value)\"></pre>\n  </div>\n</template>\n\n<style>\n.key {\n  font-weight: bold;\n  color: #02BC77;\n}\n\n</style>\n<script>\nimport { isFunction, forEach } from 'lodash'\n\nexport default {\n  props: {\n    schema: {\n      type: [Object, Array],\n      required: true\n    },\n    value: {\n      type: Object,\n      required: true\n    },\n    sharedConfig: {\n      type: Object,\n      required: false\n    }\n  },\n  data () {\n    return {\n      form: {\n      }\n    }\n  },\n  watch: {\n    value: function () {\n      this.$nextTick(() => {\n        this.validate()\n      })\n    }\n  },\n  computed: {\n    parsedSchema () {\n      if (Array.isArray(this.schema)) return this.schema\n      const arraySchema = []\n      for (let model in this.schema) {\n        arraySchema.push({\n          ...this.schema[model],\n          model\n        })\n      }\n      return arraySchema\n    },\n    errorMessages () {\n      return ['']\n    }\n  },\n  methods: {\n    prettyJSON: function (json) {\n      if (json) {\n        json = JSON.stringify(json, undefined, 4)\n        json = json.replace(/&/g, '&').replace(/</g, '<').replace(/>/g, '>')\n        return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/g, function (match) {\n          var cls = 'number'\n          if (/^\"/.test(match)) {\n            if (/:$/.test(match)) {\n              cls = 'key'\n            } else {\n              cls = 'string'\n            }\n          } else if (/true|false/.test(match)) {\n            cls = 'boolean'\n          } else if (/null/.test(match)) {\n            cls = 'null'\n          }\n          return '<span class=\"' + cls + '\">' + match + '</span>'\n        })\n      }\n    },\n    update (property, value) {\n      this.$emit('input', {\n        ...this.value,\n        [property]: value\n      })\n    },\n    binds (field) {\n      return field.schema\n        ? { schema: field.schema }\n        : { ...this.sharedConfig, ...field }\n    },\n    val (field) {\n      if (field.schema && !this.value[field.model]) {\n        return {}\n      }\n      return this.value[field.model]\n    },\n    validate () {\n      let valid = true\n      forEach(this.$children, (child) => {\n        if (isFunction(child.validate)) {\n          let validation = child.validate()\n          valid = valid && validation\n        }\n      })\n      return valid\n    }\n  }\n}\n</script>\n"]}]}